---
title: "data_generation"
author: "Jack Thomas"
date: "5/9/2022"
output: pdf_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

Data generation for Blanc et al. model.

```{r define}
# number of sites in the study
nsites <- 10

# number of individuals in capture history
n <- 10

# number of sampling occasions
nsample <- 5

# actual population
N <- 0

# capture probability
p <- 0.5

# occupancy probability
occup <- 0
```

```{r datagen}

# seed set for testing purposes only
set.seed(1234)


# empty capture history matrix
cap_hist <- array(NA, dim = c(n, nsample))

# empty presence-absence matrix
pres_abs <- array(0, dim = c(nsites, nsample))

# Capture history generation
for (i in 1:n) {
  for (j in 1:nsample) {
    rv <- runif(1)
    if (p <= rv) {
      cap_hist[i, j] <- 1
    } else {
      cap_hist[i, j] <- 0
    }
  }
}

# Presence-absence generation
for (i in 1:n) {
  for (j in 1:nsample) {
    if (cap_hist[i, j] == 1) {
      # pick random site
      rsite <- sample(1:nsites, 1)
      # assign a 1 at capture occasion j
      pres_abs[rsite, j] <- 1
    }
  }
}
```

```{r output}
# write data to files
write(cap_hist, file = "capture-recapture-data.txt")
write.table(pres_abs, file = "presence-absence-data.csv", col.names = FALSE, row.names = FALSE, sep = ",")
```
